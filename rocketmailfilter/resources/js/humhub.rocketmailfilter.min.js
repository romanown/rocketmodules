humhub.module("rocketmailfilter.unread",function(e,t,n){var i=e.require("ui.widget").Widget,t=t("ui.filter").Filter.extend();t.prototype.init=function(){this.hiddenInput=this.$.find("[name=unread]"),this.mailFilterForm=i.instance("#mail-filter-root").$.find("form"),this.mainCheckbox=this.$.find("[name=unread-toggle]"),this.cosmeticCheckbox=this.addFakeCosmeticCheckbox(),this.placeUnreadToggle()},t.prototype.placeUnreadToggle=function(){var e=n("#mail-conversation-overview .panel-heading").children().first();this.$.detach().insertAfter(e),this.$.removeClass("hidden")},t.prototype.triggerChange=function(){this.toggleInputValue(),this.cosmeticCheckbox.prop("checked",this.isChecked()),this.isChecked()?this.addFakeInput():this.removeFakeInput(),i.instance("#mail-filter-root").triggerChange()},t.prototype.addFakeInput=function(){this.mailFilterForm.find('[name="unread"]').length||this.mailFilterForm.prepend(this.hiddenInput)},t.prototype.removeFakeInput=function(){this.mailFilterForm.find('[name="unread"]').remove()},t.prototype.addFakeCosmeticCheckbox=function(){var e=this,t=n("#rocketmailfilter-filter-checkbox"),i=t.closest("div.form-check");return this.mailFilterForm.prepend(i),i.removeClass("hidden"),t.on("change",function(){e.mainCheckbox.click()}),t},t.prototype.toggleInputValue=function(){this.hiddenInput.val(this.isChecked()?"0":"1")},t.prototype.isChecked=function(){return 0!==Number(this.hiddenInput.val())},e.export=t});