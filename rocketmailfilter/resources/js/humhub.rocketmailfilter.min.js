humhub.module("rocketmailfilter.unread",function(e,t,i){var n=e.require("ui.widget").Widget,t=t("ui.filter").Filter.extend();t.prototype.init=function(){this.hiddenInput=this.$.find("[name=unread]"),this.mailFilterForm=n.instance("#mail-filter-root").$.find("form"),this.placeUnreadToggle()},t.prototype.placeUnreadToggle=function(){var e=i("#mail-conversation-overview .panel-heading").children().first();this.$.detach().insertAfter(e),this.$.removeClass("hidden")},t.prototype.triggerChange=function(){this.toggleInputValue(),this.isChecked()?this.addFakeInput():this.removeFakeInput(),n.instance("#mail-filter-root").triggerChange()},t.prototype.addFakeInput=function(){this.mailFilterForm.find('[name="unread"]').length||this.mailFilterForm.prepend(this.hiddenInput)},t.prototype.removeFakeInput=function(){this.mailFilterForm.find('[name="unread"]').remove()},t.prototype.toggleInputValue=function(){this.hiddenInput.val(this.isChecked()?"0":"1")},t.prototype.isChecked=function(){return 0!==Number(this.hiddenInput.val())},e.export=t});